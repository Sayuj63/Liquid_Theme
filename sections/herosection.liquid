{% schema %}
{
  "name": "Hero Slideshow",
  "settings": [
    { "type": "image_picker", "id": "slide1", "label": "Slide 1" },
    { "type": "image_picker", "id": "slide2", "label": "Slide 2" },
    { "type": "image_picker", "id": "slide3", "label": "Slide 3" },
    { "type": "image_picker", "id": "thumb1", "label": "Thumbnail 1" },
    { "type": "image_picker", "id": "thumb2", "label": "Thumbnail 2" },
    { "type": "image_picker", "id": "thumb3", "label": "Thumbnail 3" }
  ],
  "presets": [
    {
      "name": "Hero Slideshow",
      "category": "Hero"
    }
  ]
}
{% endschema %}

<section class="hero-section">
  <div class="hero-slideshow">
    <div class="hero-slide active" data-slide="0">
      <img src="{{ section.settings.slide1 | image_url: width:1920, height:1080 }}" alt="Featured Products" class="hero-bg" width="1920" height="1080" />
      <div class="hero-content">
        <h1>FEATURED<br>PRODUCTS</h1>
        <p>Shop our best sellers</p>
        <a class="hero-btn" href="/collections/all">SHOP NOW</a>
      </div>
      <div class="hero-loader"></div>
    </div>
    <div class="hero-slide" data-slide="1">
      <img src="{{ section.settings.slide2 | image_url: width:1920, height:1080 }}" alt="Just Dropped" class="hero-bg" width="1920" height="1080" />
      <div class="hero-content">
        <h1>JUST<br>DROPPED</h1>
        <p>Limited edition release, available now</p>
        <a class="hero-btn" href="/collections/new">SHOP NOW</a>
      </div>
      <div class="hero-loader"></div>
    </div>
    <div class="hero-slide" data-slide="2">
      <img src="{{ section.settings.slide3 | image_url: width:1920, height:1080 }}" alt="Featured Products" class="hero-bg" width="1920" height="1080" />
      <div class="hero-content">
        <h1>FEATURED<br>PRODUCTS</h1>
        <p>Shop our best sellers</p>
        <a class="hero-btn" href="/collections/all">SHOP NOW</a>
      </div>
      <div class="hero-loader"></div>
    </div>
    <div class="hero-thumbnails">
      <div class="thumb active" data-thumb="0">
        <img src="{{ section.settings.thumb1 | image_url: width:80, height:80 }}" alt="Thumb 1" width="80" height="80" />
      </div>
      <div class="thumb" data-thumb="1">
        <img src="{{ section.settings.thumb2 | image_url: width:80, height:80 }}" alt="Thumb 2" width="80" height="80" />
      </div>
      <div class="thumb" data-thumb="2">
        <img src="{{ section.settings.thumb3 | image_url: width:80, height:80 }}" alt="Thumb 3" width="80" height="80" />
      </div>
    </div>
  </div>
</section>

<style>
.hero-section {
  position: relative;
  width: 100vw;
  min-height: 100vh;
  overflow: hidden;
  background: #111;
}
.hero-slideshow {
  position: relative;
  width: 100vw;
  height: 100vh;
}
.hero-slide {
  display: none;
  position: absolute;
  width: 100vw;
  height: 100vh;
  top: 0; left: 0;
  transition: opacity 0.5s;
  z-index: 1;
}
.hero-slide.active {
  display: block;
  z-index: 2;
}
.hero-bg {
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  filter: brightness(0.85);
}
.hero-content {
  position: absolute;
  top: 50%;
  left: 5vw;
  transform: translateY(-50%);
  color: #fff;
  z-index: 3;
}
.hero-content h1 {
  font-size: 5vw;
  font-family: serif;
  font-weight: bold;
  line-height: 1;
  margin-bottom: 2vw;
  letter-spacing: -0.05em;
}
.hero-content p {
  font-size: 1vw;
  margin-bottom: 2vw;
}
.hero-btn {
  padding: 0.5vw 2vw;
  background: #fff;
  color: #111;
  font-weight: bold;
  text-decoration: none;
  border-radius: 2px;
  font-size: 1vw;
  border: 2px solid #fff;
  transition: background 0.2s, color 0.2s;
}
.hero-btn:hover {
  background: #111;
  color: #fff;
}
.hero-thumbnails {
  position: absolute;
  bottom: 3vw;
  right: 5vw;
  display: flex;
  gap: 1vw;
  z-index: 5;
}
.thumb {
  border: 2px solid transparent;
  cursor: pointer;
  border-radius: 2px;
  overflow: hidden;
  width: 4vw;
  height: 4vw;
  transition: border 0.2s;
}
.thumb.active {
  border: 2px solid #fff;
}
.thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.hero-loader {
  position: absolute;
  bottom: 2vw;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 4px;
  background: rgba(255,255,255,0.2);
  border-radius: 2px;
  overflow: hidden;
  z-index: 10;
}
.hero-slide.active .hero-loader::after {
  content: '';
  display: block;
  height: 100%;
  width: 0%;
  background: #fff;
  animation: loader-bar 4s linear forwards;
}
@keyframes loader-bar {
  0% { width: 0%; }
  100% { width: 100%; }
}
@media (max-width: 900px) {
  .hero-content h1 { font-size: 8vw; }
  .hero-btn, .hero-content p { font-size: 3vw; }
}
</style>

<script>
(function() {
  var slides = document.querySelectorAll('.hero-slide');
  var thumbs = document.querySelectorAll('.thumb');
  var current = 0;
  var timer;

  function showSlide(idx) {
    slides[current].classList.remove('active');
    thumbs[current].classList.remove('active');
    current = idx;
    slides[current].classList.add('active');
    thumbs[current].classList.add('active');
    resetTimer();
  }

  function resetTimer() {
    if (timer) clearTimeout(timer);
    timer = setTimeout(function() {
      showSlide((current + 1) % slides.length);
    }, 4000);
  }

  thumbs.forEach(function(thumb, idx) {
    thumb.addEventListener('click', function() {
      showSlide(idx);
    });
  });

  showSlide(0);
})();
</script>
