<section class="community-instagram-gallery">
  <div class="gallery-header-row">
    <div>
      <h2 class="gallery-title">{{ section.settings.heading }}</h2>
      <div class="gallery-subtitle">{{ section.settings.subheading }}</div>
    </div>
    <div class="gallery-cta">
      {%- if section.settings.cta_url != blank and section.settings.cta_text != blank -%}
        <a href="{{ section.settings.cta_url }}" target="_blank" rel="noopener" class="gallery-cta-link">{{ section.settings.cta_text }} â†—</a>
      {%- endif -%}
    </div>
  </div>
  <div class="gallery-carousel-outer">
    <div class="gallery-carousel" id="gallery-carousel">
      {% for block in section.blocks %}
        <a href="{{ block.settings.instagram_url }}" target="_blank" rel="noopener" class="gallery-image-link">
          <div class="gallery-image-box">
            <img src="{{ block.settings.image | image_url: width:500, height:600 }}" alt="Instagram post" class="gallery-image" width="500" height="600" />
            <div class="instagram-overlay">
              <svg class="instagram-icon" viewBox="0 0 448 512" width="40" height="40" fill="#fff"><path d="M224,202.66A53.34,53.34,0,1,0,277.34,256,53.38,53.38,0,0,0,224,202.66Zm124.71-41a54,54,0,0,0-30.36-30.36C293.61,120,256,118.13,224,118.13s-69.61,1.87-94.31,13.17a54,54,0,0,0-30.36,30.36C120,154.39,118.13,192,118.13,224s1.87,69.61,13.17,94.31a54,54,0,0,0,30.36,30.36c24.7,11.3,62.31,13.17,94.31,13.17s69.61-1.87,94.31-13.17a54,54,0,0,0,30.36-30.36c11.3-24.7,13.17-62.31,13.17-94.31S360,154.39,348.71,161.66ZM224,338a82,82,0,1,1,82-82A82,82,0,0,1,224,338Zm85.4-148.6a19.2,19.2,0,1,1-19.2-19.2A19.2,19.2,0,0,1,309.4,189.4ZM398.8,80.2A54,54,0,0,0,368.44,49.84C343.74,38.54,306.13,36.67,274.13,36.67s-69.61,1.87-94.31,13.17A54,54,0,0,0,49.84,80.2C38.54,104.9,36.67,142.51,36.67,174.51s1.87,69.61,13.17,94.31a54,54,0,0,0,30.36,30.36c24.7,11.3,62.31,13.17,94.31,13.17s69.61-1.87,94.31-13.17a54,54,0,0,0,30.36-30.36c11.3-24.7,13.17-62.31,13.17-94.31S409.46,104.9,398.8,80.2Z"/></svg>
            </div>
          </div>
        </a>
      {% endfor %}
      <!-- Duplicate for infinite scroll effect -->
      {% for block in section.blocks %}
        <a href="{{ block.settings.instagram_url }}" target="_blank" rel="noopener" class="gallery-image-link">
          <div class="gallery-image-box">
            <img src="{{ block.settings.image | image_url: width:500, height:600 }}" alt="Instagram post" class="gallery-image" width="500" height="600" />
            <div class="instagram-overlay">
              <svg class="instagram-icon" viewBox="0 0 448 512" width="40" height="40" fill="#fff"><path d="M224,202.66A53.34,53.34,0,1,0,277.34,256,53.38,53.38,0,0,0,224,202.66Zm124.71-41a54,54,0,0,0-30.36-30.36C293.61,120,256,118.13,224,118.13s-69.61,1.87-94.31,13.17a54,54,0,0,0-30.36,30.36C120,154.39,118.13,192,118.13,224s1.87,69.61,13.17,94.31a54,54,0,0,0,30.36,30.36c24.7,11.3,62.31,13.17,94.31,13.17s69.61-1.87,94.31-13.17a54,54,0,0,0,30.36-30.36c11.3-24.7,13.17-62.31,13.17-94.31S360,154.39,348.71,161.66ZM224,338a82,82,0,1,1,82-82A82,82,0,0,1,224,338Zm85.4-148.6a19.2,19.2,0,1,1-19.2-19.2A19.2,19.2,0,0,1,309.4,189.4ZM398.8,80.2A54,54,0,0,0,368.44,49.84C343.74,38.54,306.13,36.67,274.13,36.67s-69.61,1.87-94.31,13.17A54,54,0,0,0,49.84,80.2C38.54,104.9,36.67,142.51,36.67,174.51s1.87,69.61,13.17,94.31a54,54,0,0,0,30.36,30.36c24.7,11.3,62.31,13.17,94.31,13.17s69.61-1.87,94.31-13.17a54,54,0,0,0,30.36-30.36c11.3-24.7,13.17-62.31,13.17-94.31S409.46,104.9,398.8,80.2Z"/></svg>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
  <style>
    .community-instagram-gallery {
      background: #111;
      padding: 48px 0 0 0;
      color: #fff;
      width: 100vw;
      overflow: hidden;
    }
    .gallery-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      max-width: 1400px;
      margin: 0 auto 12px auto;
      padding: 0 32px;
    }
    .gallery-title {
      font-size: 3vw;
      font-weight: 900;
      margin: 0 0 8px 0;
      letter-spacing: -0.04em;
      text-transform: uppercase;
    }
    .gallery-subtitle {
      font-size: 1.1vw;
      font-weight: 600;
      opacity: 0.68;
      margin-bottom: 4px;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }
    .gallery-cta-link {
      color: #fff;
      font-weight: bold;
      font-size: 1.1vw;
      text-decoration: none;
      border-bottom: 2px solid #fff;
      letter-spacing: 0.03em;
      transition: color 0.16s;
    }
    .gallery-cta-link:hover {
      color: #aaa;
    }
    .gallery-carousel-outer {
      width: 100vw;
      overflow-x: hidden;
      margin-top: 18px;
      border-top: 2px solid #fff;
    }
    .gallery-carousel {
      display: flex;
      flex-direction: row;
      align-items: stretch;
      width: max-content;
      animation: scroll-gallery 40s linear infinite;
    }
    @keyframes scroll-gallery {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .gallery-image-link {
      display: block;
      width: 260px;
      min-width: 260px;
      height: 360px;
      margin: 0 8px;
      position: relative;
      overflow: hidden;
      border: 2px solid #fff;
      border-radius: 2px;
      background: #1a1a1a;
      transition: box-shadow 0.18s;
    }
    .gallery-image-link:hover {
      box-shadow: 0 6px 44px 0 rgba(0,0,0,0.20);
      z-index: 10;
    }
    .gallery-image-box {
      width: 100%;
      height: 100%;
      position: relative;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }
    .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: brightness(0.98);
      transition: filter 0.18s;
    }
    .gallery-image-link:hover .gallery-image {
      filter: brightness(1.08);
    }
    .instagram-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%; height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(17,17,17,0.0);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.18s;
    }
    .gallery-image-link:hover .instagram-overlay {
      opacity: 1;
      background: rgba(17,17,17,0.10);
      pointer-events: none;
    }
    .instagram-icon {
      opacity: 0.96;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,0.16));
    }
    @media (max-width: 900px) {
      .gallery-header-row {
        flex-direction: column;
        align-items: flex-start;
        padding: 0 12px;
      }
      .gallery-title {
        font-size: 8vw;
        font-weight: 900;
        letter-spacing: 0.01em;
        line-height: 1.1;
        margin-bottom: 0.3em;
      }
      .gallery-subtitle {
        font-size: 4vw;
        font-weight: 600;
        opacity: 0.93;
        margin-bottom: 0.2em;
      }
      .gallery-cta-link {
        font-size: 3.5vw;
      }
      .gallery-image-link {
        width: 48vw;
        min-width: 48vw;
        height: 56vw;
        margin: 0 4px;
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Community IG Gallery",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "FOLLOW AXIOM" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "WEAR IT YOUR WAY. TAG US ON INSTAGRAM FOR YOUR CHANCE TO BE FEATURED." },
    { "type": "text", "id": "cta_text", "label": "CTA Text", "default": "FOLLOW US" },
    { "type": "url", "id": "cta_url", "label": "CTA Link" }
  ],
  "blocks": [
    {
      "type": "instagram_image",
      "name": "Instagram Image",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Instagram Image" },
        { "type": "url", "id": "instagram_url", "label": "Instagram Post/Profile URL" }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    { "name": "Community Instagram Gallery" }
  ]
}
{% endschema %}
